<!--
InovaWeb Dashboard - HTML + JS + CSS com abas, relatórios dinâmicos e acessibilidade
- Produtos: CRUD completo
- Vendas: gráfico de vendas
- Relatórios: métricas e gráficos dinâmicos
- Acessibilidade: troca de tema, zoom
-->

<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InovaWeb Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background: #f0f4f8;
            color: #333;
            transition: background 0.3s, color 0.3s;
        }

        body.dark {
            background: #1f2937;
            color: white;
        }

        .container {
            display: flex;
            min-height: 100vh;
            transform: scale(1);
            transition: transform 0.3s;
        }

        .sidebar {
            width: 220px;
            background: #1f2937;
            color: white;
            padding: 20px;
            display: flex;
            flex-direction: column;
            transition: background 0.3s, color 0.3s;
        }

        body.dark .sidebar {
            background: #111827;
            color: white;
        }

        .sidebar h1 {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .sidebar nav div {
            margin: 10px 0;
            padding: 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: 0.2s;
        }

        .sidebar nav div:hover,
        .sidebar nav .active {
            background: #374151;
        }

        body.dark .sidebar nav div:hover,
        body.dark .sidebar nav .active {
            background: #4b5563;
        }

        .main {
            flex: 1;
            padding: 20px;
        }

        h2 {
            font-size: 26px;
            margin-bottom: 15px;
        }

        .cards {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            flex: 1;
            min-width: 180px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: 0.3s;
            cursor: pointer;
        }

        body.dark .card {
            background: #374151;
            color: white;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .card h3 {
            margin: 0;
            font-size: 14px;
            color: #6b7280;
        }

        body.dark .card h3 {
            color: #d1d5db;
        }

        .card p {
            margin: 5px 0 0 0;
            font-size: 20px;
            font-weight: bold;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        body.dark table {
            background: #374151;
            color: white;
        }

        th,
        td {
            padding: 12px 10px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        body.dark th,
        body.dark td {
            border-bottom: 1px solid #6b7280;
        }

        th {
            background: #f9fafb;
            color: #374151;
            font-weight: 600;
        }

        body.dark th {
            background: #4b5563;
            color: white;
        }

        tr:hover {
            background: #f3f4f6;
        }

        body.dark tr:hover {
            background: #4b5563;
        }

        .chart-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(255, 255, 255, 0.1);
            margin-bottom: 25px;
        }

        body.dark .chart-card {
            background: #374151;
            color: white;
        }

        button {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.2s;
        }

        button:hover {
            opacity: 0.8;
        }

        .btn-add {
            background: #10b981;
            color: white;
            margin-bottom: 10px;
        }

        .btn-edit {
            background: #3b82f6;
            color: white;
        }

        .btn-delete {
            background: #ef4444;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .accessibility {
            margin-bottom: 20px;
        }

        .accessibility button {
            margin-right: 10px;
        }
    </style>
</head>

<body>
    <div class="container">
        <aside class="sidebar">
            <h1>InovaWeb</h1>
            <nav>
                <div class="active" onclick="openTab('produtos', this)">Produtos</div>
                <div onclick="openTab('vendas', this)">Vendas</div>
                <div onclick="openTab('relatorios', this)">Relatórios</div>
            </nav>
        </aside>

        <main class="main">
            <div class="accessibility">
                <button onclick="toggleTheme()">Trocar Tema</button>
                <button onclick="zoomIn()">Zoom +</button>
                <button onclick="zoomOut()">Zoom -</button>
                <button onclick="resetZoom()">Resetar Zoom</button>
            </div>

            <div id="produtos" class="tab-content active">
                <h2>Produtos</h2>
                <div class="cards">
                    <div class="card" id="total-products">
                        <h3>Produtos</h3>
                        <p>0</p>
                    </div>
                    <div class="card" id="total-stock">
                        <h3>Estoque total</h3>
                        <p>0</p>
                    </div>
                </div>
                <div class="card">
                    <button class="btn-add" onclick="addProduct()">Adicionar Produto</button>
                    <table>
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Categoria</th>
                                <th>Preço</th>
                                <th>Estoque</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="productsTable"></tbody>
                    </table>
                </div>
            </div>

            <div id="vendas" class="tab-content">
                <h2>Vendas</h2>
                <div class="chart-card">
                    <h3>Vendas (últimos dias)</h3>
                    <canvas id="salesChart" height="150"></canvas>
                </div>
            </div>

            <div id="relatorios" class="tab-content">
                <h2>Relatórios</h2>
                <div class="cards" id="reportCards"></div>
                <div class="chart-card">
                    <h3>Receita por Categoria</h3>
                    <canvas id="categoryChart" height="150"></canvas>
                </div>
            </div>
        </main>
    </div>

    <script>
        let zoomLevel = 1;
        function toggleTheme() { document.body.classList.toggle('dark'); }
        function zoomIn() { zoomLevel += 0.1; document.querySelector('.container').style.transform = `scale(${zoomLevel})`; }
        function zoomOut() { zoomLevel -= 0.1; if (zoomLevel < 0.5) zoomLevel = 0.5; document.querySelector('.container').style.transform = `scale(${zoomLevel})`; }
        function resetZoom() { zoomLevel = 1; document.querySelector('.container').style.transform = `scale(${zoomLevel})`; }

        let products = [
            { name: 'Cadeira Office', category: 'Móveis', price: 299.9, stock: 1299 },
            { name: 'Monitor 24"', category: 'Eletrônicos', price: 899.0, stock: 5877 },
            { name: 'RTX 5090', category: 'Peças', price: 7899.9, stock:1000 },
            { name: 'SSD de 1TB', category: 'Peças', price: 599.9, stock: 2087 },
            { name: 'Teclado Mecânico', category: 'Acessórios', price: 249.5, stock: 2598 },
        ];

        const sales = [
            { date: '01/09', total: 1250 },
            { date: '02/09', total: 980 },
            { date: '03/09', total: 1430 },
            { date: '04/09', total: 860 },
            { date: '01/10', total: 2000 },
            { date: '02/10', total: 2367 },
            { date: '03/10', total: 1543 },
            { date: '04/10', total: 1876 },
            { date: '05/10', total: 4298 },
        ];

        function formatCurrency(v) { return v.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }); }

        function renderDashboard() {
            document.getElementById('total-products').querySelector('p').textContent = products.length;
            document.getElementById('total-stock').querySelector('p').textContent = products.reduce((s, p) => s + p.stock, 0);
            const tbody = document.getElementById('productsTable');
            tbody.innerHTML = '';
            products.forEach((p, i) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `<td>${p.name}</td><td>${p.category}</td><td>${formatCurrency(p.price)}</td><td>${p.stock}</td><td><button class='btn-edit' onclick='editProduct(${i})'>Editar</button> <button class='btn-delete' onclick='deleteProduct(${i})'>Remover</button></td>`;
                tbody.appendChild(tr);
            });
            renderReports();
        }

        function addProduct() {
            const name = prompt('Nome do produto:'); if (!name) return;
            const category = prompt('Categoria:');
            const price = parseFloat(prompt('Preço:')) || 0;
            const stock = parseInt(prompt('Estoque:')) || 0;
            products.push({ name, category, price, stock });
            renderDashboard();
        }

        function editProduct(index) {
            const p = products[index];
            const name = prompt('Nome do produto:', p.name); if (!name) return;
            const category = prompt('Categoria:', p.category);
            const price = parseFloat(prompt('Preço:', p.price)) || p.price;
            const stock = parseInt(prompt('Estoque:', p.stock)) || p.stock;
            products[index] = { name, category, price, stock };
            renderDashboard();
        }

        function deleteProduct(index) { if (confirm('Remover este produto?')) { products.splice(index, 1); renderDashboard(); } }

        function initChart() {
            const ctx = document.getElementById('salesChart').getContext('2d');
            new Chart(ctx, { type: 'line', data: { labels: sales.map(s => s.date), datasets: [{ label: 'Vendas', data: sales.map(s => s.total), borderColor: '#6366f1', fill: false, tension: 0.3 }] }, options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } } });
        }

        function renderReports() {
            const reportDiv = document.getElementById('reportCards');
            reportDiv.innerHTML = '';
            const totalRevenue = products.reduce((s, p) => s + p.price * p.stock, 0);
            const totalProducts = products.length;
            const totalStock = products.reduce((s, p) => s + p.stock, 0);
            [{ title: 'Produtos', value: totalProducts }, { title: 'Estoque total', value: totalStock }, { title: 'Receita estimada', value: formatCurrency(totalRevenue) }].forEach(r => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `<h3>${r.title}</h3><p>${r.value}</p>`;
                reportDiv.appendChild(card);
            });
            renderCategoryChart();
        }

        function renderCategoryChart() {
            const categories = {};
            products.forEach(p => { categories[p.category] = (categories[p.category] || 0) + p.price * p.stock; });
            const ctx = document.getElementById('categoryChart').getContext('2d');
            new Chart(ctx, { type: 'bar', data: { labels: Object.keys(categories), datasets: [{ label: 'Receita', data: Object.values(categories), backgroundColor: '#3b82f6' }] }, options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } } });
        }

        function openTab(tabId, element) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('.sidebar nav div').forEach(nav => nav.classList.remove('active'));
            element.classList.add('active');
        }

        renderDashboard();
        initChart();
    </script>
</body>

</html>